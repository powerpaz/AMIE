<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geoportal ‚Äî Instituciones Educativas</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

  <!-- PapaParse (CSV fallback) -->
  <script src="https://unpkg.com/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <!-- TOP NAV -->
  <header class="nav">
    <div class="brand">
      <div class="dot"></div>
      <span>Geoportal ‚Äî IE Ecuador</span>
    </div>
    <div class="searchbar">
      <input id="q-amie" type="text" placeholder="üîé Buscar AMIE..." />
      <input id="q-nombre" type="text" placeholder="üîé Buscar nombre..." />
      <button id="btn-buscar" class="btn primary">Buscar</button>
      <button id="btn-limpiar" class="btn ghost">Limpiar</button>
    </div>
  </header>

  <!-- MAP + PANELS -->
  <main class="stage">
    <div id="map"></div>

    <!-- FLOAT: Filters pill -->
    <div class="pill filters">
      <select id="f-provincia"><option value="">Provincia</option></select>
      <select id="f-canton" disabled><option value="">Cant√≥n</option></select>
      <select id="f-parroquia" disabled><option value="">Parroquia</option></select>
      <select id="f-sosten"><option value="">Sostenimiento</option></select>
      <select id="f-tipo"><option value="">Tipo</option></select>
    </div>

    <!-- FLOAT: KPI cards -->
    <div class="kpis">
      <div class="card">
        <div class="k">Instituciones</div>
        <div id="kpi-total" class="v">0</div>
      </div>
      <div class="card">
        <div class="k">Provincias</div>
        <div id="kpi-provincias" class="v">0</div>
      </div>
      <div class="card">
        <div class="k">Tipos</div>
        <div id="kpi-tipos" class="v">0</div>
      </div>
    </div>

    <!-- RIGHT PANEL (table) -->
    <aside class="panel">
      <div class="panel-head">
        <strong>Listado</strong>
        <div class="pager">
          <button id="pg-prev" class="btn sm">‚óÄ</button>
          <span><span id="pg-now">1</span>/<span id="pg-total">1</span></span>
          <button id="pg-next" class="btn sm">‚ñ∂</button>
          <select id="pg-size" class="sm">
            <option>25</option><option>50</option><option>100</option>
          </select>
        </div>
      </div>
      <div class="table-wrap">
        <table id="grid">
          <thead>
            <tr>
              <th>AMIE</th><th>Nombre</th><th>Tipo</th>
              <th>Sostenimiento</th><th>Provincia</th><th>Cant√≥n</th><th>Parroquia</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="panel-foot">
        <button id="btn-clear-selection" class="btn danger ghost">Limpiar selecci√≥n (0)</button>
      </div>
    </aside>

    <!-- FLOAT: action buttons (right) -->
    <div class="fab-col">
      <button class="fab" title="Ajustes">‚öôÔ∏è</button>
      <button class="fab" title="Compartir">üîó</button>
      <button class="fab" title="Ayuda">‚ùì</button>
    </div>

    <!-- HUD bottom -->
    <footer class="hud">
      <div class="chip">Estado: <span id="status">Listo.</span></div>
      <div class="chip">Cursor: <span id="cursor">‚Äî</span></div>
      <div class="chip">Selecci√≥n: <span id="selCount">0</span></div>
    </footer>
  </main>

  <!-- Supabase + config + app -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
