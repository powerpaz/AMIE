 """<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geoportal ‚Äî Instituciones Educativas</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

  <!-- Leaflet Draw (extent) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css">
  <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>

  <!-- Proj4 (DD <-> UTM) -->
  <script src="https://cdn.jsdelivr.net/npm/proj4@2.11.0/dist/proj4.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/proj4leaflet@1.0.2/src/proj4leaflet.min.js"></script>

  <!-- (Opcional) Plugin de coordenadas propio si lo subes -->
  <link rel="stylesheet" href="latlontools/latlontools.css" onerror="this.remove()" />
  <script src="latlontools/latlontools.js" onerror="this.remove()"></script>

  <script type="module" src="app.js"></script>

  <link rel="preload" href="provincias.geojson" as="fetch" crossorigin>
</head>
<body>
  <header>
    <h1>Geoportal ‚Äî Instituciones Educativas</h1>

    <div class="search-row">
      <input id="amieInput" placeholder="Buscar por AMIE o nombre" />
      <button id="searchBtn">Buscar</button>
    </div>

    <button id="themeToggle" class="ghost-btn" title="Cambiar tema">üåô</button>
  </header>

  <main>
    <section class="dashboard">
      <div class="card"><div class="kpi-label">Instituciones</div><div id="kpiTotal" class="kpi-value">‚Äî</div></div>
      <div class="card"><div class="kpi-label">Matriz</div><div id="kpiMatriz" class="kpi-value">‚Äî</div></div>
      <div class="card"><div class="kpi-label">Establecimiento</div><div id="kpiEst" class="kpi-value">‚Äî</div></div>
      <div class="card"><div class="kpi-label">Sostenimientos</div><div id="kpiSost" class="kpi-value">‚Äî</div></div>
    </section>

    <section class="filters">
      <select id="provSelect"><option value="">Provincia</option></select>
      <select id="cantSelect"><option value="">Cant√≥n</option></select>
      <select id="parrSelect"><option value="">Parroquia</option></select>
      <select id="sostSelect"><option value="">Sostenimiento</option></select>
      <select id="tipoSelect">
        <option value="">Tipo</option>
        <option value="MATRIZ">MATRIZ</option>
        <option value="ESTABLECIMIENTO">ESTABLECIMIENTO</option>
      </select>
      <button id="clearBtn">Limpiar</button>
    </section>

    <!-- Herramientas tipo plugin -->
    <section class="tools">
      <button id="toolDropPoint" class="ghost-btn">üìç Fijar punto</button>
      <button id="toolDrawExtent" class="ghost-btn">‚¨õ Extent</button>
      <button id="toolClearTools" class="ghost-btn">üßπ Limpiar</button>

      <div class="tool-group">
        <input id="zoomFree" placeholder="Lat, Lon (acepta , o .)" style="width:240px">
        <input id="zoomLevel" type="number" placeholder="Zoom" value="15" style="width:80px">
        <button id="zoomGo" class="ghost-btn">Ir</button>
      </div>

      <div class="tool-group">
        <input id="ddInput" placeholder="DD ej: -2.170998, -79.922359" style="width:260px">
        <button id="dd2dms" class="ghost-btn">DD ‚Üí DMS</button>
        <input id="dmsInput" placeholder='DMS ej: 2¬∞10‚Ä≤15‚Ä≥S, 79¬∞55‚Ä≤20‚Ä≥W' style="width:260px">
        <button id="dms2dd" class="ghost-btn">DMS ‚Üí DD</button>
        <button id="dd2utm" class="ghost-btn">DD ‚Üí UTM</button>
        <span id="utmOut" class="chip"></span>
      </div>
    </section>

    <section class="content">
      <div id="map"></div>
      <div class="table-wrap">
        <table id="tbl">
          <thead>
            <tr>
              <th>AMIE</th><th>Nombre</th><th>Tipo</th>
              <th>Sostenimiento</th><th>Provincia</th><th>Cant√≥n</th><th>Parroquia</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="pagination">
          <button id="prevPage" class="ghost-btn">‚óÄ</button>
          <span id="pageInfo">P√°gina 1/1</span>
          <button id="nextPage" class="ghost-btn">‚ñ∂</button>
          <select id="pageSize">
            <option value="25" selected>25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>
    </section>

    <div id="coordsBar" class="coords-bar">Lat: ‚Äî  Lon: ‚Äî (click para copiar)</div>
  </main>
</body>
</html>
"""

styles_css = """:root{
  --bg:#ffffff; --fg:#111; --muted:#666; --card:#fff; --border:#eaeaea;
  --chip:#f2f2f2; --table-hover:#fafafa; --kpi:#111;
}
body.dark{
  --bg:#0f1115; --fg:#eaeef4; --muted:#9aa4b2; --card:#141821; --border:#232a36;
  --chip:#1b2230; --table-hover:#151b26; --kpi:#eaeef4;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Segoe UI,Roboto,Arial}
header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;gap:8px;align-items:center}
h1{font-size:18px;margin:0;flex:1}
.search-row{display:flex;gap:8px;max-width:520px;flex:2}
.search-row input{flex:1;padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg)}
.search-row button{padding:8px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);cursor:pointer}
.ghost-btn{padding:8px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);cursor:pointer}
.chip{padding:4px 8px;background:var(--chip);border:1px solid var(--border);border-radius:999px;font-size:12px}

main{padding:12px}
.dashboard{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:12px}
.card{padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--card);box-shadow:0 1px 4px rgba(0,0,0,.05)}
.kpi-label{font-size:12px;color:var(--muted)}
.kpi-value{font-size:26px;font-weight:800;color:var(--kpi)}
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.filters select,.filters button{padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg)}

.tools{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0}
.tool-group{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

.content{display:grid;grid-template-columns:1.2fr 1fr;gap:12px}
#map{height:65vh;border:1px solid var(--border);border-radius:14px;overflow:hidden}
.table-wrap{max-height:65vh;display:flex;flex-direction:column;gap:8px;border:1px solid var(--border);border-radius:14px;background:var(--card);overflow:hidden}
table{width:100%;border-collapse:collapse}
th,td{font-size:12px;padding:8px;border-bottom:1px solid var(--border)}
tbody tr:hover{background:var(--table-hover)}
.pagination{display:flex;align-items:center;gap:8px;padding:8px;border-top:1px solid var(--border)}
#pageInfo{font-size:12px;color:var(--muted)}
@media (max-width:1000px){.content{grid-template-columns:1fr}#map{height:50vh}}
.leaflet-control-layers{border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
.leaflet-control-zoom a{border-radius:8px !important}
.red-dot{width:10px;height:10px;border-radius:50%;background:#ff2a2a;border:0}
.coords-bar{margin-top:8px;padding:8px 10px;border:1px solid var(--border);
  background:var(--card);color:var(--fg);border-radius:10px;font-size:12px;
  user-select:none;cursor:pointer;width:fit-content;box-shadow:0 1px 4px rgba(0,0,0,.05)}
"""
