<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geoportal — Instituciones Educativas</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css">
<script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>


  <!-- Estilos propios -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

  <!-- (Opcional) Plugin de coordenadas (si subes /latlontools/ al repo) -->
  <link rel="stylesheet" href="latlontools/latlontools.css" onerror="this.remove()" />
  <script src="latlontools/latlontools.js" onerror="this.remove()"></script>

<section class="tools">
  <button id="toolDropPoint" class="ghost-btn">📍 Fijar punto</button>
  <button id="toolDrawExtent" class="ghost-btn">⬛ Extent</button>
  <button id="toolClearTools" class="ghost-btn">🧹 Limpiar</button>

  <div class="tool-group">
    <input id="zoomLat" placeholder="Lat (DD)" style="width:120px">
    <input id="zoomLon" placeholder="Lon (DD)" style="width:120px">
    <input id="zoomLevel" type="number" placeholder="Zoom" value="15" style="width:80px">
    <button id="zoomGo" class="ghost-btn">Ir</button>
  </div>

  <div class="tool-group">
    <input id="ddInput" placeholder="DD ej: -2.170998, -79.922359" style="width:260px">
    <button id="dd2dms" class="ghost-btn">DD → DMS</button>
    <input id="dmsInput" placeholder='DMS ej: 2°10′15″S, 79°55′20″W' style="width:260px">
    <button id="dms2dd" class="ghost-btn">DMS → DD</button>
  </div>
</section>
  
  <!-- App -->
  <script type="module" src="app.js"></script>

  <!-- Preload del catálogo oficial -->
  <link rel="preload" href="provincias.geojson" as="fetch" crossorigin>
</head>
<body>
  <header>
    <h1>Geoportal — Instituciones Educativas</h1>

    <div class="search-row">
      <input id="amieInput" placeholder="Buscar por AMIE o nombre" />
      <button id="searchBtn">Buscar</button>
    </div>

    <button id="themeToggle" class="ghost-btn" title="Cambiar tema">🌙</button>
  </header>

  <main>
    <section class="dashboard">
      <div class="card"><div class="kpi-label">Instituciones</div><div id="kpiTotal" class="kpi-value">—</div></div>
      <div class="card"><div class="kpi-label">Matriz</div><div id="kpiMatriz" class="kpi-value">—</div></div>
      <div class="card"><div class="kpi-label">Establecimiento</div><div id="kpiEst" class="kpi-value">—</div></div>
      <div class="card"><div class="kpi-label">Sostenimientos</div><div id="kpiSost" class="kpi-value">—</div></div>
    </section>

    <section class="filters">
      <select id="provSelect"><option value="">Provincia</option></select>
      <select id="cantSelect"><option value="">Cantón</option></select>
      <select id="parrSelect"><option value="">Parroquia</option></select>
      <select id="sostSelect"><option value="">Sostenimiento</option></select>
      <select id="tipoSelect">
        <option value="">Tipo</option>
        <option value="MATRIZ">MATRIZ</option>
        <option value="ESTABLECIMIENTO">ESTABLECIMIENTO</option>
      </select>
      <button id="clearBtn">Limpiar</button>
    </section>

    <section class="content">
      <div id="map"></div>

      <div class="table-wrap">
        <table id="tbl">
          <thead>
            <tr>
              <th>AMIE</th><th>Nombre</th><th>Tipo</th>
              <th>Sostenimiento</th><th>Provincia</th><th>Cantón</th><th>Parroquia</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div class="pagination">
          <button id="prevPage" class="ghost-btn">◀</button>
          <span id="pageInfo">Página 1/1</span>
          <button id="nextPage" class="ghost-btn">▶</button>
          <select id="pageSize">
            <option value="25" selected>25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>
    </section>

    <!-- Visor de coordenadas -->
    <div id="coordsBar" class="coords-bar">Lat: —  Lon: — (click para copiar)</div>
  </main>
</body>
</html>
