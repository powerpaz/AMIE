:root{
  --bg:#0f1318; --bg-soft:#151b23; --panel:#111821; --card:#141d27;
  --surface:#f7fafc; --text:#f2f6fc; --text-muted:#b9c4d1; --ink:#1f2937;
  --primary:#3b82f6; --accent:#22d3ee; --border:rgba(255,255,255,.15);
  --shadow:0 10px 28px rgba(0,0,0,.35); --radius:14px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:linear-gradient(180deg,#10151b 0%, #0e1520 100%);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial}

.nav{height:58px;display:flex;align-items:center;gap:16px;padding:0 16px;border-bottom:1px solid var(--border);backdrop-filter:blur(8px)}
.brand{display:flex;align-items:center;gap:10px;font-weight:600}
.brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--accent)}
.spacer{flex:1}
.nav-logo{
  height:56px; max-width:720px; object-fit:contain;
  background:#0f1a28; border:1px solid var(--border); border-radius:10px; padding:6px 12px;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.25));
}

.wrap{position:relative;height:calc(100vh - 58px)}
.filters{display:flex;gap:8px;padding:10px 12px}
.filters select{background:#0f1620;color:#fff;border:1px solid var(--border);border-radius:12px;padding:8px 10px}

#map{position:absolute; inset:98px 12px 98px 12px; border-radius:18px; overflow:hidden; border:1px solid var(--border)}

.panel.left{position:absolute; left:0; top:98px; bottom:98px; width:520px; pointer-events:none}
.transform-panel{
  position:absolute;
  left:60px; top:12px; bottom:auto; width:460px;
  max-height:none; overflow:auto; pointer-events:auto;
  background:rgba(15,22,32,.96); border:1px solid var(--border);
  border-radius:14px; box-shadow:var(--shadow); z-index:540; color:#e8f1ff;
  backdrop-filter:blur(6px); font-size:12.5px;
}
.tp-head{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:#0f1a28;border-bottom:1px solid var(--border)}
.tp-actions{display:flex;gap:6px}
.btn{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:#0f1620;color:#fff;cursor:pointer}
.btn.sm{padding:6px 10px;font-size:12.5px}
.btn.ghost{background:transparent}
.tp-body{padding:10px}
.tp-row{margin-bottom:10px}
.tp-grid{display:grid;gap:8px}
.tp-grid.tp-2{grid-template-columns:repeat(2,1fr)}
.tp-grid.tp-3{grid-template-columns:repeat(3,1fr)}
.tp-grid.tp-4{grid-template-columns:60px 60px 1fr 1fr}
.tp-row label{display:block;margin-bottom:6px;color:#cfe5ff}
input, select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--border);background:#0f1620;color:#fff;outline:none}
.hint{opacity:.75}

#basemap-switcher{margin-top:12px;border:1px solid var(--border);border-radius:var(--radius);padding:12px;background:var(--panel);pointer-events:auto}
#basemap-switcher .panel-title{font-weight:700;margin:0 0 8px 0;color:var(--text);font-size:14px}
#basemap-switcher .switcher-group{display:flex;flex-wrap:wrap;gap:10px 14px;align-items:center}
#basemap-switcher label{display:flex;align-items:center;gap:8px;color:var(--text);font-size:13px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:rgba(255,255,255,0.04)}
#basemap-switcher input[type=radio], #basemap-switcher input[type=checkbox]{transform:scale(1.05)}
#basemap-switcher label:hover{background:rgba(255,255,255,0.07)}

/* Medidor debajo del zoom (+/-) */
.leaflet-top.leaflet-left .measure-ctrl{ margin-top: 46px; }
.measure-ctrl a{ width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-size:16px; }
.measure-ctrl.is-on a{ background:#0f1a28; color:#fff; }
.measure-tip{ background:#0f1a28;color:#fff;border:1px solid var(--border);border-radius:8px; }

/* Cruz roja (pin fijo) */
.cross-pin{ filter: drop-shadow(0 0 2px rgba(0,0,0,.6)); }
.cross-pin svg{ display:block; }
